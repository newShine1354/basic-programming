<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice_Set_9</title>
</head>

<body>
    <h1>Sat Shri Akal G</h1>
    <script>
        // Question 1: Write a program to load a JavaScript file in a brower using promises. Use then() to display an alert when the load is complete.
        // Answer1:
        // const loadscript = async (src) => {
        //     return new Promise((resolve, reject) => {
        //         let script = document.createElement('script')
        //         script.src = src;
        //         script.onload = () => {
        //             resolve(src)
        //         }
        //         document.head.append(script)
        //         script.onerror = () => {
        //             reject('sorry')
        //         }
        //     });
        // }
        // let a = loadscript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
        // a.then((value) => {
        //     alert(new Date().getMilliseconds())
        //     alert("https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js is loaded")
        //     alert(new Date().getMilliseconds())
        // })

        // Question 2: Write the same program from previous question and use async/await syntax.
        // Answer2:
        // const main1 = async() => {
        //     console.log(new Date().getMilliseconds());
        //     let a = await loadscript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
        //     console.log(new Date().getMilliseconds());
        //     console.log(a);
        // }
        // main1();

        // Create a promise which rejects after 3 seconds use an async/await syntax and handle the error using try catch syntax.
        // Answer3:
        // const p1 = () => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             reject('This error has been handled')
        //         }, 3000)
        //     });
        // }
        // const a = async () => {
        //     try {
        //         let identifier = await p1();
        //         console.log(identifier);
        //     }
        //     catch (error) {
        //         console.log(error);
        //     }
        // }
        // a();

        // Question 4: Write a program using Promise.all() inside an async/await to await 3 promises. Compare its results with the case where we await promises one by one.
        // Answer4: 
        let punjabWeather2 = async()=>{
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve("21 deg")
                }, 2000);
            });
        }
        let haryanaWeather2 = async()=>{
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve("25 deg")
                }, 2000);
            });
        }
        let rajasthanWeather2 = async()=>{
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve("31 deg")
                }, 2000);
            });
        }
        const output = async() =>{
            // Part1
            // console.time("output")
            let pWeather = await punjabWeather2() // Fetch 10 products from the database.
            console.log(pWeather);
            let hWeather = await haryanaWeather2() // Fetch 10 products from the database.
            console.log(hWeather);
            let rWeather = await rajasthanWeather2() // Fetch 10 products from the database.
            console.log(rWeather);
            console.log(pWeather, hWeather, rWeather);
            Part2
            // let phrWeather = await Promise.all([punjabWeather2(), haryanaWeather2(), rajasthanWeather2()]) // Fetch all products from the database.
            let phrWeather = await Promise.all([punjabWeather2, haryanaWeather2, rajasthanWeather2]) // Fetch all products from the database.
            console.log(phrWeather);
            return phrWeather
            console.timeEnd("output")
        }
        output();
        console.log(output());
    </script>
</body>

</html>